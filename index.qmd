---
title: "MeteoMTP"
---



```{python}
#| echo: false
#| warning: false
import plotly.express as px
import pandas as pd
import numpy as np
import pooch
import zipfile
#| echo: false
import datetime
from dateutil.relativedelta import relativedelta

# Source: #

current_time = datetime.datetime.now()
last_date = current_time - relativedelta(months=2)
fname_meteo = pooch.retrieve(f"https://api.open-meteo.com/v1/forecast?latitude=43.6109&longitude=3.8763&hourly=wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,precipitation_sum,wind_direction_10m_dominant&timezone=Europe%2FBerlin", known_hash=None)
print(fname_meteo)



```


```{python}
import json
# Opening JSON file
f = open(fname_meteo)
# returns JSON object as 
# a dictionary
data = json.load(f)
# Iterating through the json
# list
json_string = json.dumps(data)  # Convert Python dictionary to a JSON string
print(json_string)
print(data["hourly"]["wind_speed_10m"])
t = []
t2=[]
day1=[]
tabday=[]
for time, speed in zip(data["hourly"]["time"], data["hourly"]["wind_speed_10m"]):
    day = time.split("T")[0]  # Extraire la partie "jour" de la date et de l'heure
    hour = time.split("T")[1]
    t.append(speed)
    t2.append(hour)
    if hour == '23:00':
        day1.append(np.mean(t))
        tabday.append(day)
        t=[]  

nameday=[]
for i in range (7):
# Convertir la cha√Æne de date en un objet datetime
    date_obj = datetime.strptime(tabday[i], '%Y-%m-%d')

# Obtenir le jour de la semaine (en anglais)
    jour_semaine = date_obj.strftime("%A")
    nameday.append(jour_semaine)
    
print(nameday)
print(t2) 
print(day1)
print(tabday)
print(data["daily"]["weather_code"])
print(data["daily"]["temperature_2m_max"])
print(data["daily"]["temperature_2m_min"])
print(data["daily"]["sunrise"])
print(data["daily"]["sunset"])
print(data["daily"]["precipitation_sum"])
print(data["daily"]["wind_direction_10m_dominant"])
# Closing file
f.close()
```


:::: {.columns}
::: {.column width="10%"}
**```{python}nameday[1]```**
**```{python}nameday[1]```**
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="1,66%"}
::: {.column width="10%"}
::: {.column width="10%"}

```{python}
print(f"Computation was performed at : {current_time} (GMT)")
```

Sources are:
